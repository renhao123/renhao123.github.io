webpackJsonp([32],{2254:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=n.n(i),c=n(393),l=n(2255),u=n(1147),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=c.H.TreeNode,d={fontSize:"20px",color:"#aaa",marginLeft:"10px"},b=Object.assign({},d,{color:"rgb(24, 144, 255)"}),v=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),p=0;p<s;p++)l[p]=arguments[p];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={menuLists:[],selectedKeys:[],expandedKeys:[],visible:!1,isEditor:!1,activeData:void 0},r.getMenuLists=function(){Object(u.a)("/bigdata/system/menu/list").then(function(e){e.success&&r.setState({menuLists:e.obj||[]})})},r.onSelect=function(e,t){e.length>0?r.setState({selectedKeys:e,activeData:t.node.props.detail}):r.setState({selectedKeys:e,activeData:void 0})},r.onDragEnter=function(e){r.setState({expandedKeys:e.expandedKeys})},r.onDrop=function(e){var t=e.dragNode.props.detail,n=e.node.props.detail,a=e.node.props.eventKey,o=e.dragNode.props.eventKey,i=e.node.props.pos.split("-");if(t&&t.parentId<=0&&t.subMenus.length>0&&(i.length>2||!e.dropToGap))return void c.J.warn("\u4e0d\u80fd\u79fb\u52a8\u6709\u5b50\u8282\u70b9\u7684\u8282\u70b9\uff01");if(e.dropToGap||!(i.length>2)){var s=e.dropPosition-Number(i[i.length-1]),l=void 0,p=void 0,f=o;2!==i.length||e.dropToGap?i.length>2?(p=n.parentId,l=n.seq+s):2===i.length&&e.dropToGap&&(p=-1,l=n.seq+s):(p=a,l=n.seq+1);var d={id:f,targetParentId:p,targetSeq:l};Object(u.b)("/bigdata/system/menu/move",d,0,1).then(function(e){e.success?(c.J.success("\u79fb\u52a8\u6210\u529f\uff01"),r.getMenuLists()):c.J.error(e.obj)})}},r.deleteAction=function(){r.state.activeData&&c.r.confirm({title:"\u786e\u5b9a\u5220\u9664"+r.state.activeData.name+"\u83dc\u5355\u5417?",onOk:function(){var e={id:r.state.activeData.id};Object(u.b)("/bigdata/system/menu/delete",e,0,1).then(function(e){e.success?(c.J.success("\u5220\u9664\u6210\u529f\uff01"),r.getMenuLists()):c.J.error(e.obj)})},onCancel:function(){},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"})},r.saveAction=function(e){var t=r.state.isEditor,n=e.name,a={name:n},o="/bigdata/system/menu/save";t&&(o="/bigdata/system/menu/update",a.id=r.state.activeData.id,a.level=r.state.activeData.id.toString().length),Object(u.b)(o,a,0,1).then(function(e){e.success?(c.J.success("\u4fdd\u5b58\u6210\u529f\uff01"),r.setState({visible:!1,isEditor:!1},function(){r.getMenuLists()})):c.J.error(e.obj)})},i=n,o(r,i)}return r(t,e),p(t,[{key:"componentWillMount",value:function(){this.getMenuLists()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(c.e,{title:s.a.createElement("span",{style:{color:"#1890FF",lineHeight:"34px"}},"\u83dc\u5355"),extra:s.a.createElement("div",null,s.a.createElement(c.l,{type:"form",style:this.state.activeData?b:d,onClick:function(){e.state.activeData&&e.setState({visible:!0,isEditor:!0})}}))},s.a.createElement(c.H,{onSelect:this.onSelect,selectedKeys:this.state.selectedKeys,defaultExpandedKeys:this.state.expandedKeys,draggable:!0,onDragEnter:this.onDragEnter,onDrop:this.onDrop},function e(t){return t.map(function(t){return t.subMenus&&t.subMenus.length?s.a.createElement(f,{key:t.id,title:t.name,detail:t},e(t.subMenus)):s.a.createElement(f,{key:t.id,title:t.name,detail:t})})}(this.state.menuLists))),this.state.visible?s.a.createElement(l.a,{title:this.state.isEditor?"\u7f16\u8f91\u83dc\u5355":"\u65b0\u5efa\u83dc\u5355",visible:this.state.visible,isEditor:this.state.isEditor,onOk:this.saveAction,activeData:this.state.activeData,onCancel:function(){return e.setState({visible:!1,isEditor:!1})}}):null)}}]),t}(s.a.Component);t.default=v},2255:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),c=n(393),l=n(1189),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=c.k.Item,f={labelCol:{span:4},wrapperCol:{span:19,style:{paddingLeft:"10px"}}},d=function(e){function t(){var e,n,r,i;a(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.sureAction=function(){r.props.form.validateFields(function(e,t){e||r.props.onOk(t)})},i=n,o(r,i)}return r(t,e),u(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.isEditor?this.props.activeData:void 0;return s.a.createElement(l.a,{title:this.props.title,visible:!0,onOk:this.sureAction,onCancel:this.props.onCancel,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},s.a.createElement(p,Object.assign({},f,{label:"\u540d\u79f0"}),e("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u83dc\u5355\u540d\u79f0"}],initialValue:t&&t.name})(s.a.createElement(c.m,{placeholder:"\u8bf7\u8f93\u5165\u83dc\u5355\u540d\u79f0"}))))}}]),t}(i.Component),b=c.k.create()(d);t.a=b}});
//# sourceMappingURL=32.008e693d.chunk.js.map