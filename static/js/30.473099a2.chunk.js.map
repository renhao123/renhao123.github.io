{"version":3,"sources":["../static/js/30.473099a2.chunk.js","pages/SystemSetup/EarlyWarningSetting/WhiteListConfig/Holiday/AddOrEditPage.js","pages/SystemSetup/EarlyWarningSetting/WhiteListConfig/Holiday/ChooseStrategyTargetModel.js"],"names":["webpackJsonp","2245","module","__webpack_exports__","__webpack_require__","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_1_react_router_dom__","__WEBPACK_IMPORTED_MODULE_2_antd__","__WEBPACK_IMPORTED_MODULE_3__ChooseStrategyTargetModel__","__WEBPACK_IMPORTED_MODULE_4_moment__","__WEBPACK_IMPORTED_MODULE_4_moment___default","__WEBPACK_IMPORTED_MODULE_5__utils__","__WEBPACK_IMPORTED_MODULE_6__axios__","_createClass","defineProperties","target","props","descriptor","key","protoProps","staticProps","FormItem","Form","Item","RangePicker","DatePicker","formItemLayout","labelCol","span","wrapperCol","style","paddingLeft","disabledDate","current","moment","endOf","dateFormat","studentStyle","width","height","borderRadius","border","cursor","marginTop","lineHeight","textAlign","AddOrEditPage","state","visible","confirmVisible","selectedTarget","undefined","editId","editInfo","rangePickerValue","dateArr","chooseStudent","setState","strategyTargetCollege","strategyTargetCollegeName","split","form","setFieldsValue","strategyId","id","saveAction","validateFields","err","values","remark","flag","setFields","errors","Error","message","error","date","map","item","startDate","endDate","join","data","strategyDate","postAction","then","res","success","history","push","warn","obj","strategyTarget","addStrategyDate","addDate","format","isExist","forEach","changeRangePicker","deletestrategyDate","index","JSON","parse","stringify","changestrategyDate","filter","a","showConfirm","setModalClose","params","getHashParam","assign","strategyName","getFieldDecorator","this","getFieldValue","Fragment","title","className","paddingTop","label","rules","initialValue","type","align","justify","onClick","color","onChange","marginLeft","TextArea","resize","maxLength","size","marginRight","onCancel","onOk","footer","padding","verticalAlign","fontSize","fontWeight","Component","AddOrEditPageForm","withRouter","2246","__WEBPACK_IMPORTED_MODULE_1_antd__","__WEBPACK_IMPORTED_MODULE_2__common_components_MainModal__","__WEBPACK_IMPORTED_MODULE_3__axios__","columns","dataIndex","render","text","record","badge","status","ChooseStudentModel","pageNum","pageSize","total","dataLists","selectedRowKeys","selectedRows","getData","pageInfo","list","changePage","pagination","rowClick","onSelectChange","dataSource","rowSelection","columnWidth","centered","marginBottom","placeholder","e","icon","bordered","showQuickJumper","showTotal","onRow"],"mappings":"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","file":"static/js/30.473099a2.chunk.js","sourcesContent":["webpackJsonp([30],{\n\n/***/ 2245:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_router_dom__ = __webpack_require__(133);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd__ = __webpack_require__(393);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ChooseStrategyTargetModel__ = __webpack_require__(2246);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment__ = __webpack_require__(45);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_moment__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils__ = __webpack_require__(132);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__axios__ = __webpack_require__(1147);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var FormItem=__WEBPACK_IMPORTED_MODULE_2_antd__[\"k\" /* Form */].Item;var RangePicker=__WEBPACK_IMPORTED_MODULE_2_antd__[\"i\" /* DatePicker */].RangePicker;var formItemLayout={labelCol:{span:10},wrapperCol:{span:14,style:{paddingLeft:'10px'}}};var disabledDate=function disabledDate(current){return current&&current<__WEBPACK_IMPORTED_MODULE_4_moment___default()().endOf('day');};var dateFormat='YYYY-MM-DD';var studentStyle={width:258,height:58,borderRadius:4,border:'1px dashed #d9d9d9',cursor:'pointer',marginTop:-10,lineHeight:'20px',textAlign:'center'};var AddOrEditPage=function(_Component){_inherits(AddOrEditPage,_Component);function AddOrEditPage(){var _ref;var _temp,_this,_ret;_classCallCheck(this,AddOrEditPage);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=AddOrEditPage.__proto__||Object.getPrototypeOf(AddOrEditPage)).call.apply(_ref,[this].concat(args))),_this),_this.state={visible:false,confirmVisible:false,selectedTarget:undefined,editId:undefined,editInfo:undefined,rangePickerValue:[],dateArr:[]},_this.chooseStudent=function(selectedTarget){_this.setState({selectedTarget:selectedTarget,visible:false});var strategyTargetCollege=selectedTarget.strategyTargetCollegeName?selectedTarget.strategyTargetCollegeName.split('、'):[];_this.props.form.setFieldsValue({strategyId:selectedTarget.id,strategyTargetCollege:strategyTargetCollege});},_this.saveAction=function(){_this.props.form.validateFields(function(err,values){if(!err){var strategyId=values.strategyId,remark=values.remark;var flag=true;// console.log(values)\n//判断是否选择关联的预警策略\nif(!strategyId&&!_this.state.editInfo){_this.props.form.setFields({strategyId:{errors:[new Error('请选择关联的预警策略！')]}});flag=false;}// //判断是否选择不预警时间\n// if((!strategyDate || strategyDate.length===0) && this.state.rangePickerValue.length===0){\n//     this.props.form.setFields({\n//         strategyDate: {\n//             errors: [new Error('请选择不预警时间！')],\n//         },\n//     });\n//     flag = false;\n// }\nif(_this.state.dateArr.length===0){flag=false;__WEBPACK_IMPORTED_MODULE_2_antd__[\"J\" /* message */].error('请选择不预警时间');}if(!flag){//如果不通过验证不能继续执行提交\nreturn;}// //获取预警时间\n// let dateArr = [];\n// if(this.state.rangePickerValue.length>0){\n//     dateArr.push({\n//         startDate:this.state.rangePickerValue[0].format(dateFormat),\n//         endDate:this.state.rangePickerValue[1].format(dateFormat)\n//     })\n// }\n// console.log(dateArr)\nvar date=_this.state.dateArr.map(function(item){return item.startDate+'~'+item.endDate;}).join(',');if(_this.state.editInfo){//编辑时\nvar data={remark:remark,strategyDate:date};data.id=_this.state.editInfo.id;Object(__WEBPACK_IMPORTED_MODULE_6__axios__[\"b\" /* postAction */])(\"/bigdata/alarmHolidayWhitelist/update\",data).then(function(res){if(res.success){__WEBPACK_IMPORTED_MODULE_2_antd__[\"J\" /* message */].success('修改成功！',1,function(){_this.props.history.push('/mainframe/systemsetup/earlywarningwhitelist');});}else{__WEBPACK_IMPORTED_MODULE_2_antd__[\"J\" /* message */].warn(res.obj);}});}else{var _data={strategyId:strategyId,strategyTarget:_this.state.selectedTarget.strategyTarget,remark:remark,strategyDate:date};Object(__WEBPACK_IMPORTED_MODULE_6__axios__[\"b\" /* postAction */])(\"/bigdata/alarmHolidayWhitelist/save\",_data).then(function(res){if(res.success){__WEBPACK_IMPORTED_MODULE_2_antd__[\"J\" /* message */].success('保存成功！',1,function(){_this.props.history.push('/mainframe/systemsetup/earlywarningwhitelist');});}else{__WEBPACK_IMPORTED_MODULE_2_antd__[\"J\" /* message */].warn(res.obj);}});}}});},_this.addStrategyDate=function(){var rangePickerValue=_this.state.rangePickerValue;if(rangePickerValue&&rangePickerValue.length>0){var strategyDate=_this.state.dateArr;var addDate={startDate:rangePickerValue[0].format(dateFormat),endDate:rangePickerValue[1].format(dateFormat)};var isExist=false;strategyDate.forEach(function(item){// 判断日期不互相包含才行\nif(__WEBPACK_IMPORTED_MODULE_4_moment___default()(item.startDate)>__WEBPACK_IMPORTED_MODULE_4_moment___default()(addDate.startDate)&&__WEBPACK_IMPORTED_MODULE_4_moment___default()(item.startDate)>__WEBPACK_IMPORTED_MODULE_4_moment___default()(addDate.endDate)||__WEBPACK_IMPORTED_MODULE_4_moment___default()(item.endDate)<__WEBPACK_IMPORTED_MODULE_4_moment___default()(addDate.startDate)&&__WEBPACK_IMPORTED_MODULE_4_moment___default()(item.endDate)<__WEBPACK_IMPORTED_MODULE_4_moment___default()(addDate.endDate)){isExist=false;}else{isExist=true;}});if(isExist){__WEBPACK_IMPORTED_MODULE_2_antd__[\"J\" /* message */].error('所选日期重复！');return;}// 合并选择的到state\nstrategyDate=[].concat(_toConsumableArray(strategyDate),[addDate]);_this.setState({dateArr:strategyDate,rangePickerValue:[]});_this.props.form.setFieldsValue({strategyDate:strategyDate});}else{__WEBPACK_IMPORTED_MODULE_2_antd__[\"J\" /* message */].error('请选择日期范围！');}},_this.changeRangePicker=function(values){_this.setState({rangePickerValue:values});//判断不预警时间是否为空\n// let strategyDate = this.props.form.getFieldValue('strategyDate') || [];\n// if((!strategyDate || strategyDate.length===0) && values.length===0){\n//     this.props.form.setFields({\n//         strategyDate: {\n//             errors: [new Error('请选择不预警时间！')],\n//         },\n//     });\n// } else {\n//     this.props.form.validateFields();\n// }\n},_this.deletestrategyDate=function(item,index){var strategyDate=JSON.parse(JSON.stringify(_this.state.dateArr));var changestrategyDate=strategyDate.filter(function(a){return!(a.startDate===item.startDate&&a.endDate===item.endDate);});_this.setState({dateArr:changestrategyDate});_this.props.form.setFieldsValue({strategyDate:changestrategyDate});},_this.showConfirm=function(){_this.setState({confirmVisible:true});},_this.setModalClose=function(){_this.setState({confirmVisible:false});},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(AddOrEditPage,[{key:'componentWillMount',value:function componentWillMount(){var _this2=this;var params=Object(__WEBPACK_IMPORTED_MODULE_5__utils__[\"d\" /* getHashParam */])();if(params.id){var data={id:params.id};Object(__WEBPACK_IMPORTED_MODULE_6__axios__[\"b\" /* postAction */])(\"/bigdata/alarmHolidayWhitelist/findById\",data).then(function(res){if(res.success){_this2.setState({editId:params.id},function(){//获取用户详细信息\nvar editInfo=Object.assign({},res.obj)||{};var selectedTarget={id:editInfo.strategyId,strategyName:editInfo.strategyName,strategyTarget:editInfo.strategyTarget,strategyTargetCollege:editInfo.strategyTargetCollege,strategyDate:editInfo.strategyDate};var strategyDate=[];if(res.obj.strategyDate!==''){strategyDate=res.obj.strategyDate.split(',').map(function(item){return{startDate:item.split('~')[0],endDate:item.split('~')[1]};});}var strategyTargetCollege=editInfo.strategyTargetCollege?selectedTarget.strategyTargetCollege.split('、'):[];_this2.setState({editInfo:editInfo,selectedTarget:selectedTarget,dateArr:strategyDate});_this2.props.form.setFieldsValue({strategyDate:strategyDate,strategyTargetCollege:strategyTargetCollege});});}else{__WEBPACK_IMPORTED_MODULE_2_antd__[\"J\" /* message */].warn(res.obj);}});}}},{key:'render',value:function render(){var _this3=this;var getFieldDecorator=this.props.form.getFieldDecorator;var editInfo=this.state.editInfo;var selectedTarget=this.state.selectedTarget;var strategyTargetCollege=this.props.form.getFieldValue('strategyTargetCollege')||[];// let strategyDate = this.props.form.getFieldValue('strategyDate') || [];\nvar dateArr=this.state.dateArr;// console.log(strategyDate)\nreturn __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Fragment,null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"e\" /* Card */],{title:__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'common-title'},this.state.editId?'编辑节假日白名单配置':'新增节假日白名单配置')},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(FormItem,Object.assign({},formItemLayout,{style:{paddingTop:10},label:'\\u9009\\u62E9\\u5173\\u8054\\u7684\\u9884\\u8B66\\u7B56\\u7565'}),getFieldDecorator('strategyId',{rules:[{message:'请选择关联的预警策略！'}],initialValue:editInfo&&editInfo.strategyId})(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"x\" /* Row */],{type:'flex',align:'middle',justify:'center',style:studentStyle,onClick:function onClick(){if(!_this3.state.editInfo){_this3.setState({visible:true});}}},selectedTarget?__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null,selectedTarget.strategyName):__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"l\" /* Icon */],{type:'plus'}),' \\u9009\\u62E9\\u5173\\u8054\\u7684\\u9884\\u8B66\\u7B56\\u7565')))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(FormItem,Object.assign({},formItemLayout,{label:'\\u4E0D\\u9884\\u8B66\\u5B66\\u9662'}),getFieldDecorator('strategyTargetCollege',{rules:[{type:'array'}]})(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null,strategyTargetCollege.map(function(item,index){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"D\" /* Tag */],{style:{height:28,lineHeight:'28px',color:'#4a4a4a'},key:index},item);})))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(FormItem,Object.assign({},formItemLayout,{label:'\\u9009\\u62E9\\u4E0D\\u9884\\u8B66\\u65F6\\u95F4'}),getFieldDecorator('strategyDate',{rules:[{type:'array',message:'请选择不预警时间！'}]})(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Fragment,null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(RangePicker,{style:{width:398},disabledDate:disabledDate,value:this.state.rangePickerValue,onChange:this.changeRangePicker}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"l\" /* Icon */],{type:'plus-circle-o',style:{marginLeft:10,cursor:'pointer'},onClick:this.addStrategyDate})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null,dateArr.map(function(item,index){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{key:index},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"D\" /* Tag */],{style:{height:28,lineHeight:'28px',color:'#4a4a4a'}},item.startDate+'~'+item.endDate,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"l\" /* Icon */],{type:'close',style:{marginLeft:5,color:'rgba(0, 0, 0, 0.45)'},onClick:function onClick(){return _this3.deletestrategyDate(item,index);}})));}))))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(FormItem,Object.assign({},formItemLayout,{label:'\\u5907\\u6CE8'}),getFieldDecorator('remark',{initialValue:editInfo&&editInfo.remark})(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"m\" /* Input */].TextArea,{style:{width:398,height:138,resize:'none'},maxLength:'50'}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"x\" /* Row */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"h\" /* Col */],formItemLayout.labelCol),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"h\" /* Col */],formItemLayout.wrapperCol,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"d\" /* Button */],{size:'large',type:'primary',style:{marginRight:20},onClick:this.saveAction},'保 存'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"d\" /* Button */],{size:'large',onClick:this.showConfirm},'返 回')))),this.state.visible?__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__ChooseStrategyTargetModel__[\"a\" /* default */],{title:'选择预警策略',visible:this.state.visible,selectedTarget:this.state.selectedTarget,onCancel:function onCancel(){return _this3.setState({visible:false});},onOk:this.chooseStudent}):null,this.state.confirmVisible?__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"r\" /* Modal */],{visible:this.state.confirmVisible,onCancel:this.setModalClose,footer:__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"d\" /* Button */],{type:'primary',onClick:function onClick(){_this3.props.history.push('/mainframe/systemsetup/earlywarningwhitelist');}},'\\u786E\\u5B9A'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"d\" /* Button */],{onClick:this.setModalClose},'\\u53D6\\u6D88'))},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{style:{padding:'20px'}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('p',{style:{verticalAlign:'middle'}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2_antd__[\"l\" /* Icon */],{type:'question-circle',style:{color:'#faad14',fontSize:22,marginRight:16,verticalAlign:'middle'}}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',{style:{color:'rgba(0,0,0,.85)',fontWeight:500,fontSize:16,lineHeight:1.4,verticalAlign:'middle'}},'\\u786E\\u8BA4\\u8FD4\\u56DE\\u9884\\u8B66\\u767D\\u540D\\u5355\\u8BBE\\u7F6E\\u5417?')),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('p',{style:{marginLeft:38,fontSize:14,color:'rgba(0,0,0,.65)',marginTop:8}},'\\u5F53\\u524D\\u8BBE\\u7F6E\\u672A\\u4FDD\\u5B58\\uFF0C\\u8FD4\\u56DE\\u5C06\\u4E0D\\u4F1A\\u4FDD\\u5B58\\u5DF2\\u7F16\\u8F91\\u7684\\u5185\\u5BB9\\u3002'))):null);}}]);return AddOrEditPage;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);var AddOrEditPageForm=__WEBPACK_IMPORTED_MODULE_2_antd__[\"k\" /* Form */].create()(AddOrEditPage);/* harmony default export */ __webpack_exports__[\"default\"] = (Object(__WEBPACK_IMPORTED_MODULE_1_react_router_dom__[\"withRouter\"])(AddOrEditPageForm));\n\n/***/ }),\n\n/***/ 2246:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd__ = __webpack_require__(393);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__common_components_MainModal__ = __webpack_require__(1189);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__axios__ = __webpack_require__(1147);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var columns=[{title:'序号',dataIndex:'index',width:\"8%\"},{title:'预警策略名称',dataIndex:'strategyName',width:\"20%\",render:function render(text){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',{title:text},text);}},{title:'预警策略对象',dataIndex:'strategyTargetCollegeName',render:function render(text){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',{title:text},text);}},{title:'预警策略时间',dataIndex:'dateTime',width:\"20%\",render:function render(text,record){return record.startDate+'~'+record.endDate;}},{title:'状态',dataIndex:'status',width:\"10%\",render:function render(text,record){var badge=void 0;if(text==='生效'){badge=__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"b\" /* Badge */],{status:'processing'});}else if(text==='未生效'){badge=__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"b\" /* Badge */],{status:'success'});}else{badge=__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"b\" /* Badge */],{status:'default'});}return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',null,badge,text);}}];var ChooseStudentModel=function(_Component){_inherits(ChooseStudentModel,_Component);function ChooseStudentModel(){var _ref;var _temp,_this,_ret;_classCallCheck(this,ChooseStudentModel);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=ChooseStudentModel.__proto__||Object.getPrototypeOf(ChooseStudentModel)).call.apply(_ref,[this].concat(args))),_this),_this.state={pageNum:1,pageSize:8,total:0,dataLists:[],strategyName:undefined,selectedRowKeys:[],selectedRows:[],visible:false},_this.getData=function(){var _this$state=_this.state,strategyName=_this$state.strategyName,pageNum=_this$state.pageNum,pageSize=_this$state.pageSize;var data={pageInfo:{pageNum:pageNum,pageSize:pageSize},strategyName:strategyName};Object(__WEBPACK_IMPORTED_MODULE_3__axios__[\"b\" /* postAction */])(\"/bigdata/alarmStrategy/getPageData\",data).then(function(res){if(res.success){_this.setState({total:res.obj.total,dataLists:res.obj.list||[],visible:true});}else{__WEBPACK_IMPORTED_MODULE_1_antd__[\"J\" /* message */].warn(res.obj);}});},_this.onOk=function(){if(_this.state.selectedRows[0]){_this.props.onOk(_this.state.selectedRows[0]);}else{__WEBPACK_IMPORTED_MODULE_1_antd__[\"J\" /* message */].warn('请选择预警策略！');}},_this.changePage=function(pagination){_this.setState({pageNum:pagination.current,pageSize:pagination.pageSize},function(){var strategyName=_this.state.strategyName;var data=Object.assign({},{pageInfo:{pageNum:pagination.current,pageSize:pagination.pageSize}},{strategyName:strategyName});_this.getData(data);});},_this.rowClick=function(record){var data={strategyId:record.id};Object(__WEBPACK_IMPORTED_MODULE_3__axios__[\"b\" /* postAction */])(\"/bigdata/alarmHolidayWhitelist/checkName\",data).then(function(res){if(res.success){if(res.obj){__WEBPACK_IMPORTED_MODULE_1_antd__[\"J\" /* message */].error('预警策略重复');}else{_this.setState({selectedRowKeys:[record.key],selectedRows:[record]});}}else{__WEBPACK_IMPORTED_MODULE_1_antd__[\"J\" /* message */].warn(res.obj);}});},_this.onSelectChange=function(selectedRowKeys,selectedRows){_this.setState({selectedRowKeys:selectedRowKeys,selectedRows:selectedRows});},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(ChooseStudentModel,[{key:'componentWillMount',value:function componentWillMount(){if(this.props.selectedTarget){this.setState({selectedRowKeys:[this.props.selectedTarget.id],selectedRows:[this.props.selectedTarget]});}this.getData();}},{key:'render',value:function render(){var _this2=this;var dataSource=this.state.dataLists||[];dataSource.forEach(function(item,index){dataSource[index].key=item.id;dataSource[index].index=index+1;});var selectedRowKeys=this.state.selectedRowKeys;var rowSelection={selectedRowKeys:selectedRowKeys,type:'radio',columnWidth:\"40px\",onChange:this.onSelectChange};if(this.state.visible){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2__common_components_MainModal__[\"a\" /* default */],{title:this.props.title,visible:true,onCancel:this.props.onCancel,centered:true,onOk:this.onOk,width:1004},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"x\" /* Row */],{style:{marginBottom:24}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"h\" /* Col */],{span:9},'\\u9884\\u8B66\\u7B56\\u7565\\u540D\\u79F0\\uFF1A',__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"m\" /* Input */],{style:{width:246},placeholder:'请输入预警策略名称',value:this.state.strategyName,onChange:function onChange(e){return _this2.setState({strategyName:e.target.value});}})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"h\" /* Col */],{span:12},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"d\" /* Button */],{icon:'search',type:'primary',onClick:this.getData},'\\u641C \\u7D22'))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"B\" /* Table */],{dataSource:dataSource,bordered:true,rowSelection:rowSelection,columns:columns,pagination:{size:\"small\",current:this.state.pageNum,total:this.state.total,showQuickJumper:true,showTotal:function showTotal(total){return'\\u5171 '+total+' \\u6761\\u6570\\u636E';}},size:'middle',onChange:this.changePage,onRow:function onRow(record,index){return{onClick:function onClick(){return _this2.rowClick(record,index);}// 点击行\n};}}));}else{return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null);}}}]);return ChooseStudentModel;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);/* harmony default export */ __webpack_exports__[\"a\"] = (ChooseStudentModel);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/30.473099a2.chunk.js","import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Card, Form, DatePicker, Input, Button, Icon, Row, Col, message, Tag, Modal } from 'antd';\r\nimport ChooseStrategyTargetModel from './ChooseStrategyTargetModel'\r\nimport moment from 'moment';\r\nimport { getHashParam } from '../../../../../utils'\r\nimport {postAction} from '../../../../../axios';\r\n\r\nconst FormItem = Form.Item;\r\nconst RangePicker = DatePicker.RangePicker;\r\n\r\nconst formItemLayout = {\r\n    labelCol: { span: 10},\r\n    wrapperCol: { span: 14, style:{paddingLeft:'10px'}},\r\n};\r\n\r\nconst disabledDate = (current)=> {\r\n    return current && current < moment().endOf('day');\r\n}\r\n\r\nconst dateFormat = 'YYYY-MM-DD';\r\n\r\nconst studentStyle = { \r\n    width:258,height:58,borderRadius:4,\r\n    border:'1px dashed #d9d9d9',cursor:'pointer',\r\n    marginTop:-10,lineHeight:'20px',textAlign:'center'}\r\n\r\nclass AddOrEditPage extends Component {\r\n    state = {\r\n        visible: false,\r\n        confirmVisible: false,\r\n        selectedTarget:undefined,\r\n        editId:undefined,\r\n        editInfo:undefined,\r\n        rangePickerValue:[],\r\n        dateArr:[]\r\n    }\r\n    componentWillMount(){\r\n        let params = getHashParam();\r\n        if(params.id){\r\n            let data = {id:params.id}\r\n            postAction(\"/bigdata/alarmHolidayWhitelist/findById\", data).then(\r\n                (res) => {\r\n                    if (res.success) {\r\n                        this.setState({editId:params.id},()=>{\r\n                            //获取用户详细信息\r\n                            let editInfo = Object.assign({},res.obj) || {};\r\n                            let selectedTarget = {\r\n                                id: editInfo.strategyId,\r\n                                strategyName: editInfo.strategyName,\r\n                                strategyTarget: editInfo.strategyTarget,\r\n                                strategyTargetCollege: editInfo.strategyTargetCollege,\r\n                                strategyDate: editInfo.strategyDate\r\n                            }\r\n                            let strategyDate=[]\r\n                            if(res.obj.strategyDate !== ''){\r\n                                strategyDate= res.obj.strategyDate.split(',').map(item=>{\r\n                                    return {\r\n                                        startDate: item.split('~')[0],\r\n                                        endDate: item.split('~')[1]\r\n                                    }\r\n                                })\r\n                            }\r\n                           \r\n                            let strategyTargetCollege = editInfo.strategyTargetCollege?selectedTarget.strategyTargetCollege.split('、'):[];\r\n                            this.setState({\r\n                                editInfo,\r\n                                selectedTarget,\r\n                                dateArr:strategyDate\r\n                            })\r\n                            this.props.form.setFieldsValue({\r\n                                strategyDate,\r\n                                strategyTargetCollege\r\n                            })\r\n                        })\r\n                    } else {\r\n                        message.warn(res.obj);\r\n                    }\r\n                }\r\n            )\r\n           \r\n        }\r\n    }\r\n    chooseStudent = (selectedTarget) => {\r\n        this.setState({selectedTarget,visible:false})\r\n        let strategyTargetCollege = selectedTarget.strategyTargetCollegeName?selectedTarget.strategyTargetCollegeName.split('、'):[];\r\n        this.props.form.setFieldsValue({\r\n            strategyId: selectedTarget.id,\r\n            strategyTargetCollege\r\n        })\r\n    }\r\n    saveAction = () => {\r\n        this.props.form.validateFields(\r\n            (err,values) => {\r\n                if (!err) {\r\n                    const { strategyId, remark } = values;\r\n                    let flag = true;\r\n                    // console.log(values)\r\n                    //判断是否选择关联的预警策略\r\n                    if(!strategyId && !this.state.editInfo){\r\n                        this.props.form.setFields({\r\n                            strategyId: {\r\n                                errors: [new Error('请选择关联的预警策略！')],\r\n                            },\r\n                        });\r\n                        flag = false;\r\n                    }\r\n                    // //判断是否选择不预警时间\r\n                    // if((!strategyDate || strategyDate.length===0) && this.state.rangePickerValue.length===0){\r\n                    //     this.props.form.setFields({\r\n                    //         strategyDate: {\r\n                    //             errors: [new Error('请选择不预警时间！')],\r\n                    //         },\r\n                    //     });\r\n                    //     flag = false;\r\n                    // }\r\n                    if(this.state.dateArr.length === 0){\r\n                        flag = false;\r\n                        message.error('请选择不预警时间')\r\n                    }\r\n                    if(!flag){ //如果不通过验证不能继续执行提交\r\n                        return;\r\n                    }\r\n                    // //获取预警时间\r\n                    // let dateArr = [];\r\n                    // if(this.state.rangePickerValue.length>0){\r\n                    //     dateArr.push({\r\n                    //         startDate:this.state.rangePickerValue[0].format(dateFormat),\r\n                    //         endDate:this.state.rangePickerValue[1].format(dateFormat)\r\n                    //     })\r\n                    // }\r\n                    // console.log(dateArr)\r\n                    let date = this.state.dateArr.map(item=>{\r\n                        return item.startDate + '~' + item.endDate;\r\n                    }).join(',');\r\n                    \r\n                    if(this.state.editInfo){ //编辑时\r\n                        let data = {                            \r\n                            remark,\r\n                            strategyDate:date\r\n                        }\r\n                        data.id = this.state.editInfo.id;\r\n                        postAction(\"/bigdata/alarmHolidayWhitelist/update\", data).then(\r\n                            (res) => {\r\n                                if (res.success) {\r\n                                    message.success('修改成功！',1,()=>{\r\n                                        this.props.history.push('/mainframe/systemsetup/earlywarningwhitelist')\r\n                                    });\r\n                                } else {\r\n                                    message.warn(res.obj);\r\n                                }\r\n                            }\r\n                        ) \r\n                    }else{\r\n                        let data = {\r\n                            strategyId,\r\n                            strategyTarget:this.state.selectedTarget.strategyTarget,\r\n                            remark,\r\n                            strategyDate:date\r\n                        }\r\n                        postAction(\"/bigdata/alarmHolidayWhitelist/save\", data).then(\r\n                            (res) => {\r\n                                if (res.success) {\r\n                                    message.success('保存成功！',1,()=>{\r\n                                        this.props.history.push('/mainframe/systemsetup/earlywarningwhitelist')\r\n                                    });\r\n                                } else {\r\n                                    message.warn(res.obj);\r\n                                }\r\n                            }\r\n                        ) \r\n                    }                    \r\n                }\r\n            },\r\n        );\r\n    }\r\n    addStrategyDate = () => {\r\n        let rangePickerValue = this.state.rangePickerValue;\r\n        if(rangePickerValue && rangePickerValue.length>0){\r\n            let strategyDate = this.state.dateArr;\r\n            let addDate = {\r\n                startDate:rangePickerValue[0].format(dateFormat),\r\n                endDate:rangePickerValue[1].format(dateFormat)\r\n            }\r\n            let isExist = false;\r\n            strategyDate.forEach(item=>{\r\n                // 判断日期不互相包含才行\r\n                if(\r\n                    (moment(item.startDate)>moment(addDate.startDate) && \r\n                    moment(item.startDate)>moment(addDate.endDate)) || \r\n                    (moment(item.endDate)<moment(addDate.startDate) && \r\n                    moment(item.endDate)<moment(addDate.endDate))                    \r\n                    ){\r\n                    isExist = false \r\n                }else{\r\n                    isExist = true \r\n                }\r\n                \r\n            })\r\n            if(isExist){\r\n                message.error('所选日期重复！');\r\n                return;\r\n            }\r\n            // 合并选择的到state\r\n            strategyDate=[...strategyDate,addDate]\r\n            this.setState({\r\n                dateArr:strategyDate,\r\n                rangePickerValue:[]\r\n            })\r\n            this.props.form.setFieldsValue({\r\n                strategyDate\r\n            })            \r\n        } else {\r\n            message.error('请选择日期范围！')\r\n        }\r\n        \r\n    }\r\n    changeRangePicker = (values)=>{\r\n        this.setState({rangePickerValue:values})\r\n        //判断不预警时间是否为空\r\n        // let strategyDate = this.props.form.getFieldValue('strategyDate') || [];\r\n        // if((!strategyDate || strategyDate.length===0) && values.length===0){\r\n        //     this.props.form.setFields({\r\n        //         strategyDate: {\r\n        //             errors: [new Error('请选择不预警时间！')],\r\n        //         },\r\n        //     });\r\n        // } else {\r\n        //     this.props.form.validateFields();\r\n        // }\r\n    }\r\n    deletestrategyDate = (item,index)=> {\r\n        let strategyDate = JSON.parse(JSON.stringify(this.state.dateArr));\r\n        let changestrategyDate = strategyDate.filter((a)=>{\r\n            return !(a.startDate===item.startDate && a.endDate===item.endDate)\r\n        });\r\n        this.setState({\r\n            dateArr:changestrategyDate\r\n        })\r\n        this.props.form.setFieldsValue({\r\n            strategyDate:changestrategyDate\r\n        })\r\n    }\r\n    showConfirm=()=>{\r\n        this.setState({\r\n            confirmVisible: true,\r\n        });\r\n    }\r\n    setModalClose=()=>{\r\n        this.setState({\r\n            confirmVisible: false,\r\n        }); \r\n    }\r\n    render(){\r\n        const { getFieldDecorator } = this.props.form;\r\n        let editInfo = this.state.editInfo;\r\n        let selectedTarget = this.state.selectedTarget;\r\n        let strategyTargetCollege = this.props.form.getFieldValue('strategyTargetCollege') || [];\r\n        // let strategyDate = this.props.form.getFieldValue('strategyDate') || [];\r\n        const {dateArr}=this.state\r\n        // console.log(strategyDate)\r\n        return (\r\n            <React.Fragment>\r\n                    <Card title={<div className=\"common-title\">{this.state.editId?'编辑节假日白名单配置':'新增节假日白名单配置'}</div>}>\r\n                        <FormItem {...formItemLayout} style={{paddingTop:10}} label=\"选择关联的预警策略\">\r\n                            {getFieldDecorator('strategyId', {\r\n                                rules: [{\r\n                                    message: '请选择关联的预警策略！'\r\n                                }],\r\n                                initialValue: editInfo&&editInfo.strategyId,\r\n                            })(\r\n                                <Row type={'flex'} align={'middle'} justify={'center'} \r\n                                    style={studentStyle}\r\n                                    onClick={()=>{if(!this.state.editInfo){this.setState({visible:true})}}}>\r\n                                    {selectedTarget?(\r\n                                        <div>\r\n                                            {selectedTarget.strategyName}\r\n                                        </div>\r\n                                    ):(\r\n                                        <div><Icon type=\"plus\" /> 选择关联的预警策略</div>\r\n                                    )}\r\n                                    \r\n                                </Row>\r\n                            )}\r\n                        </FormItem>\r\n                        <FormItem {...formItemLayout} label=\"不预警学院\">\r\n                            {getFieldDecorator('strategyTargetCollege', {\r\n                                rules: [{\r\n                                    type: 'array',\r\n                                }]\r\n                            })(\r\n                                <div>\r\n                                    {strategyTargetCollege.map((item,index)=>(\r\n                                        <Tag \r\n                                            style={{height:28,lineHeight:'28px',color:'#4a4a4a'}}\r\n                                            key={index}>{item}</Tag>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </FormItem>\r\n                        <FormItem {...formItemLayout} label=\"选择不预警时间\">\r\n                            {getFieldDecorator('strategyDate', {\r\n                                rules: [{\r\n                                    type: 'array',\r\n                                    message: '请选择不预警时间！'\r\n                                }]\r\n                            })(\r\n                                <React.Fragment>\r\n                                    <div>\r\n                                        <RangePicker style={{width:398}} \r\n                                            disabledDate={disabledDate} value={this.state.rangePickerValue} onChange={this.changeRangePicker}/>\r\n                                        <Icon type=\"plus-circle-o\" style={{marginLeft:10,cursor:'pointer'}} onClick={this.addStrategyDate} />\r\n                                    </div>\r\n                                    <div>\r\n                                        {dateArr.map((item,index)=>(\r\n                                            <div key={index}>\r\n                                                <Tag style={{height:28,lineHeight:'28px',color:'#4a4a4a'}} >\r\n                                                    {item.startDate+'~'+item.endDate} \r\n                                                    <Icon type=\"close\" \r\n                                                        style={{marginLeft:5,color:'rgba(0, 0, 0, 0.45)'}} \r\n                                                        onClick={()=>this.deletestrategyDate(item,index)}/>\r\n                                                </Tag>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </React.Fragment>\r\n                            )}\r\n                        </FormItem>\r\n                        <FormItem {...formItemLayout} label=\"备注\">\r\n                            {getFieldDecorator('remark',{\r\n                                initialValue: editInfo&&editInfo.remark\r\n                            })(\r\n                                <Input.TextArea style={{width:398,height:138,resize:'none'}} maxLength=\"50\" />\r\n                            )}\r\n                        </FormItem>\r\n                        <Row>\r\n                            <Col {...formItemLayout.labelCol}></Col>\r\n                            <Col {...formItemLayout.wrapperCol}>\r\n                                <Button size=\"large\" type=\"primary\" style={{marginRight:20}} onClick={this.saveAction}>{'保 存'}</Button>\r\n                                <Button size=\"large\" onClick={this.showConfirm}>{'返 回'}</Button>\r\n                            </Col>\r\n                        </Row>\r\n                    </Card>\r\n                {this.state.visible?(\r\n                    <ChooseStrategyTargetModel title={'选择预警策略'}\r\n                        visible={this.state.visible}\r\n                        selectedTarget={this.state.selectedTarget}\r\n                        onCancel={()=>this.setState({visible:false})}\r\n                        onOk={this.chooseStudent}/>\r\n                ):null}\r\n                {this.state.confirmVisible?(\r\n                    <Modal\r\n                    visible={this.state.confirmVisible}\r\n                    onCancel={this.setModalClose}\r\n                    footer={<div>\r\n                        <Button type=\"primary\" onClick={()=> {\r\n                this.props.history.push('/mainframe/systemsetup/earlywarningwhitelist')\r\n            }}>确定</Button>\r\n                        <Button onClick={this.setModalClose}>取消</Button>\r\n                    </div>}\r\n                  >\r\n                  <div style={{padding: '20px'}}>\r\n                    <p style={{verticalAlign: 'middle'}}><Icon type=\"question-circle\" style={{color: '#faad14',fontSize: 22,marginRight: 16,verticalAlign: 'middle'}}/><span style={{color: 'rgba(0,0,0,.85)',fontWeight: 500,fontSize: 16,lineHeight: 1.4,verticalAlign: 'middle'}}>确认返回预警白名单设置吗?</span></p>\r\n                    <p style={{marginLeft: 38,fontSize: 14,color: 'rgba(0,0,0,.65)',marginTop: 8}}>当前设置未保存，返回将不会保存已编辑的内容。</p>\r\n                    </div>\r\n                  </Modal>\r\n                ):null}\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\nconst AddOrEditPageForm = Form.create()(AddOrEditPage);\r\nexport default withRouter(AddOrEditPageForm);\n\n\n// WEBPACK FOOTER //\n// ./src/pages/SystemSetup/EarlyWarningSetting/WhiteListConfig/Holiday/AddOrEditPage.js","import React, { Component } from 'react'\r\nimport { Button, Input, Row, Col, message, Badge, Table } from 'antd'\r\nimport MainModal from '../../../../../common/components/MainModal'\r\nimport {postAction} from '../../../../../axios';\r\n\r\nlet columns = [{\r\n    title: '序号',\r\n    dataIndex: 'index',\r\n    width: \"8%\"\r\n}, {\r\n    title: '预警策略名称',\r\n    dataIndex: 'strategyName',\r\n    width: \"20%\",\r\n    render: (text) => {\r\n    \treturn (\r\n    \t\t<span title={text}>{text}</span>\r\n    \t)\r\n    }\r\n}, {\r\n    title: '预警策略对象',\r\n    dataIndex: 'strategyTargetCollegeName',\r\n    render: (text) => {\r\n    \treturn (\r\n    \t\t<span title={text}>{text}</span>\r\n    \t)\r\n    }\r\n}, {\r\n    title: '预警策略时间',\r\n    dataIndex: 'dateTime',\r\n    width: \"20%\",\r\n    render:(text,record)=>{\r\n        return record.startDate + '~' + record.endDate;\r\n    }\r\n}, {\r\n    title: '状态',\r\n    dataIndex: 'status',\r\n    width: \"10%\",\r\n    render: (text, record)=>{\r\n        let badge;\r\n        if(text==='生效'){\r\n            badge = <Badge status=\"processing\" />\r\n        } else if(text==='未生效'){\r\n            badge = <Badge status=\"success\" />\r\n        } else {\r\n            badge = <Badge status=\"default\" />\r\n        }\r\n        return <span>{badge}{text}</span>;\r\n    }\r\n}];\r\n\r\nclass ChooseStudentModel extends Component {\r\n    state = {\r\n        pageNum: 1,\r\n        pageSize: 8,\r\n        total: 0,\r\n        dataLists: [],\r\n        strategyName: undefined,\r\n        selectedRowKeys:[],\r\n        selectedRows:[],\r\n        visible:false\r\n    }\r\n    componentWillMount(){\r\n        if(this.props.selectedTarget){\r\n            this.setState({\r\n                selectedRowKeys:[this.props.selectedTarget.id],\r\n                selectedRows:[this.props.selectedTarget]\r\n            })\r\n        }\r\n        this.getData();\r\n    }\r\n    getData = () => {\r\n        let {strategyName,pageNum,pageSize} = this.state;\r\n        let data={pageInfo: {pageNum:pageNum,pageSize:pageSize},strategyName};\r\n        postAction(\"/bigdata/alarmStrategy/getPageData\", data).then(\r\n            (res) => {\r\n                if (res.success) {\r\n                    this.setState({\r\n                        total: res.obj.total,\r\n                        dataLists: res.obj.list || [],\r\n                        visible:true\r\n                    })\r\n                } else {\r\n                    message.warn(res.obj);\r\n                }\r\n            }\r\n        )\r\n    }\r\n    onOk = ()=> {\r\n        if(this.state.selectedRows[0]){\r\n            this.props.onOk(this.state.selectedRows[0])\r\n        } else {\r\n            message.warn('请选择预警策略！')\r\n        }\r\n    }\r\n    changePage = (pagination)=> {\r\n        this.setState({pageNum:pagination.current,pageSize:pagination.pageSize},()=>{\r\n            let {strategyName } = this.state;\r\n            let data = Object.assign({},{pageInfo:{  pageNum:pagination.current, pageSize:pagination.pageSize }},{ strategyName})\r\n            this.getData(data);\r\n        })\r\n    }\r\n    rowClick = (record) => {\r\n        let data = {strategyId: record.id};\r\n        postAction(\"/bigdata/alarmHolidayWhitelist/checkName\", data).then(\r\n            (res) => {\r\n                if (res.success) {\r\n                    if(res.obj){\r\n                        message.error('预警策略重复')\r\n                    }else{\r\n                        this.setState({\r\n                            selectedRowKeys: [record.key],\r\n                            selectedRows: [record]\r\n                        })\r\n                    }\r\n                    \r\n                } else {\r\n                    message.warn(res.obj);\r\n                }\r\n            }\r\n        )\r\n    }\r\n    onSelectChange = (selectedRowKeys, selectedRows) => {\r\n        this.setState({ selectedRowKeys, selectedRows });\r\n    }\r\n    render() {\r\n        const dataSource = this.state.dataLists || [];\r\n        dataSource.forEach((item,index)=>{\r\n            dataSource[index].key = item.id;\r\n            dataSource[index].index = index + 1;\r\n        })\r\n\r\n        const selectedRowKeys = this.state.selectedRowKeys;\r\n        const rowSelection = {\r\n            selectedRowKeys,\r\n            type: 'radio',\r\n            columnWidth: \"40px\",\r\n            onChange: this.onSelectChange,\r\n        };\r\n        if(this.state.visible){\r\n            return (\r\n                <MainModal\r\n                    title={this.props.title}\r\n                    visible={true}\r\n                    onCancel={this.props.onCancel}\r\n                    centered\r\n                    onOk={this.onOk}\r\n                    width={1004}\r\n                >\r\n                    <Row style={{marginBottom:24}}>\r\n                        <Col span={9}>\r\n                            预警策略名称：<Input style={{width:246}} placeholder={'请输入预警策略名称'} value={this.state.strategyName} \r\n                                onChange={(e)=>this.setState({strategyName:e.target.value})}/>\r\n                        </Col>\r\n                        <Col span={12}>\r\n                            <Button icon=\"search\" type=\"primary\" onClick={this.getData}>搜 索</Button>\r\n                        </Col>\r\n                    </Row>\r\n                    <Table dataSource={dataSource} \r\n                        bordered\r\n                        rowSelection={rowSelection}\r\n                        columns={columns}\r\n                        pagination={{\r\n                            size: \"small\",\r\n                            current:this.state.pageNum,\r\n                            total:this.state.total,\r\n                            showQuickJumper: true,\r\n                            showTotal: total => `共 ${total} 条数据`\r\n                        }}\r\n                        size=\"middle\"\r\n                        onChange={this.changePage}\r\n                        onRow={(record, index) => {\r\n                            return {\r\n                                onClick: () => this.rowClick(record, index),// 点击行\r\n                            };\r\n                        }} />\r\n                </MainModal>\r\n            )\r\n        } else {\r\n            return (<div></div>)\r\n        }\r\n        \r\n    }\r\n}\r\nexport default ChooseStudentModel;\n\n\n// WEBPACK FOOTER //\n// ./src/pages/SystemSetup/EarlyWarningSetting/WhiteListConfig/Holiday/ChooseStrategyTargetModel.js"],"sourceRoot":""}