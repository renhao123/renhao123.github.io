{"version":3,"sources":["../static/js/28.275fd6f6.chunk.js","pages/AccessManage/Account/AddOrEditAccountModel.js","pages/AccessManage/Account/index.js","pages/AccessManage/Account/Filter.js","pages/AccessManage/Account/AccountTable.js"],"names":["webpackJsonp","1780","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_1_antd__","__WEBPACK_IMPORTED_MODULE_2__axios__","__WEBPACK_IMPORTED_MODULE_3__common_components_MainModal__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","FormItem","Form","Item","Option","Select","formItemLayout","labelCol","span","wrapperCol","style","paddingLeft","AddOrEditAccount","state","roleList","sureAction","form","validateFields","err","values","userName","name","sex","accountCode","roleId","reqUrl","data","sourceCode","rowInfo","id","postAction","then","res","success","message","hideModal","onOk","error","obj","getAction","newRoleList","forEach","item","roleName","push","setState","getFieldDecorator","this","editData","index","roles","okText","title","visible","onCancel","cancelText","label","rules","required","initialValue","username","placeholder","width","marginBottom","onChange","roleIdChange","map","Component","AddOrEditAccountModel","2251","__WEBPACK_IMPORTED_MODULE_2__Filter__","__WEBPACK_IMPORTED_MODULE_3__AccountTable__","Account","changeFilter","bind","React","2252","__WEBPACK_IMPORTED_MODULE_2__AddOrEditAccountModel__","__WEBPACK_IMPORTED_MODULE_3__axios__","Filter","account","code","role","addModalShow","accountChange","nameChange","codeChange","roleChange","handleSearch","showAddModal","hideAddModal","e","unshift","Fragment","display","marginLeft","marginRight","type","onClick","margin","icon","2253","AccountTable","columns","dataIndex","render","text","record","color","showEdit","cursor","initcode","onConfirm","deleteUser","pagination","current","pageSize","total","editShow","handleTableChange","getData","hideEdit","reloadTable","page","rows","newData","filter","sortIndex","nextProps","nextState","dataSource","bordered","marginTop"],"mappings":"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","file":"static/js/28.275fd6f6.chunk.js","sourcesContent":["webpackJsonp([28],{\n\n/***/ 1780:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd__ = __webpack_require__(393);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__axios__ = __webpack_require__(1147);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__common_components_MainModal__ = __webpack_require__(1189);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/**\r\n * Created by hutao on 2018/8/31.\r\n * 新增或编辑账户管理\r\n */var FormItem=__WEBPACK_IMPORTED_MODULE_1_antd__[\"k\" /* Form */].Item;var Option=__WEBPACK_IMPORTED_MODULE_1_antd__[\"y\" /* Select */].Option;//表单布局\nvar formItemLayout={labelCol:{span:6},wrapperCol:{span:17,style:{paddingLeft:'10px'}}};var AddOrEditAccount=function(_Component){_inherits(AddOrEditAccount,_Component);function AddOrEditAccount(){var _ref;var _temp,_this,_ret;_classCallCheck(this,AddOrEditAccount);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=AddOrEditAccount.__proto__||Object.getPrototypeOf(AddOrEditAccount)).call.apply(_ref,[this].concat(args))),_this),_this.state={roleList:[]},_this.sureAction=function(){//表单验证\n_this.props.form.validateFields(function(err,values){if(!err){var userName=values.userName,name=values.name,sex=values.sex,accountCode=values.accountCode,roleId=values.roleId;// let roleName = this.state.roleList.filter(item=>item.roleId===roleId)[0].roleName;\nvar reqUrl=\"/bigdata/system/user/save\";var data={sourceCode:\"pc\",// 调用端：(默认PC)\nuserName:userName,// 账户名 string\nname:name,// 姓名 string\nsex:sex-0,// 性别 num init ， state中存储的是string类型， 这里简单转换一下\naccountCode:accountCode,// 学号/教工号 string\nroleId:roleId-0// 用户角色 num init ， state中存储的是string类型， 这里简单转换一下\n// roleName\n};if(_this.props.rowInfo){reqUrl=\"/bigdata/system/user/update\";data.id=_this.props.rowInfo.id;}Object(__WEBPACK_IMPORTED_MODULE_2__axios__[\"b\" /* postAction */])(reqUrl,data,0,1).then(function(res){if(res.success){__WEBPACK_IMPORTED_MODULE_1_antd__[\"J\" /* message */].success(\"保存成功！！！\");_this.props.hideModal();_this.props.onOk();}else{__WEBPACK_IMPORTED_MODULE_1_antd__[\"J\" /* message */].error(res.obj);}});}});},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(AddOrEditAccount,[{key:'componentWillMount',value:function componentWillMount(){var _this2=this;// 获取用户角色列表信息\nObject(__WEBPACK_IMPORTED_MODULE_2__axios__[\"a\" /* getAction */])(\"/bigdata/system/role/list\",{sourceCode:\"pc\"}).then(function(res){if(res.success&&res.obj.length>0){var newRoleList=[];res.obj.forEach(function(item){if(item.roleName!=='超级管理员'){newRoleList.push({roleName:item.roleName,roleId:item.id+\"\"// 这里需要string类型， 后端传过来的是num类型， 简单转换一下\n});}});_this2.setState({roleList:newRoleList});}});}},{key:'render',value:function render(){var getFieldDecorator=this.props.form.getFieldDecorator;var editData=this.props.rowInfo;var roleId=void 0;if(editData){this.state.roleList.forEach(function(item,index){if(item.roleName===editData.roles){roleId=item.roleId;}});}return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__common_components_MainModal__[\"a\" /* default */],{okText:'\\u786E\\u5B9A',title:this.props.title,visible:true,onOk:this.sureAction,onCancel:this.props.hideModal,cancelText:'\\u53D6\\u6D88'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(FormItem,Object.assign({},formItemLayout,{label:'\\u8D26\\u6237\\u540D\\u79F0'}),getFieldDecorator('userName',{rules:[{required:true,message:'请输入账户名称'}],initialValue:editData&&editData.username})(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"m\" /* Input */],{placeholder:'\\u8BF7\\u8F93\\u5165\\u8D26\\u6237\\u540D\\u79F0'}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(FormItem,Object.assign({},formItemLayout,{label:'\\u59D3\\u540D'}),getFieldDecorator('name',{rules:[{required:true,message:'请输入姓名'}],initialValue:editData&&editData.name})(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"m\" /* Input */],{placeholder:'\\u8BF7\\u8F93\\u5165\\u59D3\\u540D'}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(FormItem,Object.assign({},formItemLayout,{label:'\\u6027\\u522B'}),getFieldDecorator('sex',{rules:[{required:true,message:'请输入性别'}],initialValue:editData&&editData.sex})(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"y\" /* Select */],{placeholder:'\\u8BF7\\u9009\\u62E9\\u6027\\u522B',style:{width:\"100%\"}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(Option,{value:1},'\\u7537'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(Option,{value:2},'\\u5973')))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(FormItem,Object.assign({},formItemLayout,{label:'\\u5B66\\u53F7/\\u6559\\u5DE5\\u53F7'}),getFieldDecorator('accountCode',{rules:[{required:true,message:'请输入学号/教工号'}],initialValue:editData&&editData.accountCode})(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"m\" /* Input */],{placeholder:'\\u8BF7\\u8F93\\u5165\\u5B66\\u53F7/\\u6559\\u5DE5\\u53F7'}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(FormItem,Object.assign({},formItemLayout,{label:'\\u7528\\u6237\\u89D2\\u8272'}),getFieldDecorator('roleId',{rules:[{required:true,message:'请输入用户角色'}],initialValue:roleId})(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"y\" /* Select */],{placeholder:'\\u8BF7\\u9009\\u62E9\\u7528\\u6237\\u89D2\\u8272',style:{width:\"100%\",marginBottom:8},onChange:this.roleIdChange},this.state.roleList.length>0?this.state.roleList.map(function(item){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(Option,{value:item.roleId,key:item.roleId},item.roleName);}):null))));}}]);return AddOrEditAccount;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);var AddOrEditAccountModel=__WEBPACK_IMPORTED_MODULE_1_antd__[\"k\" /* Form */].create()(AddOrEditAccount);/* harmony default export */ __webpack_exports__[\"a\"] = (AddOrEditAccountModel);\n\n/***/ }),\n\n/***/ 2251:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd__ = __webpack_require__(393);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Filter__ = __webpack_require__(2252);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__AccountTable__ = __webpack_require__(2253);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}// 顶部过滤器\n// 本页table组件\nvar Account=function(_React$Component){_inherits(Account,_React$Component);function Account(props){_classCallCheck(this,Account);var _this=_possibleConstructorReturn(this,(Account.__proto__||Object.getPrototypeOf(Account)).call(this,props));_this.state={// 参数命名根据后端键值对名称而来\nsourceCode:\"pc\",// 端\nusername:\"\",// 账户\nname:\"\",// 名称\naccountCode:\"\",// 学号/教工号\nroleId:\"\"// 账户角色\n};_this.changeFilter=_this.changeFilter.bind(_this);// 从子组件（过滤器Filter）中更新获取后端请求的最新参数， 并传给table组件\nreturn _this;}// 从子组件（过滤器Filter）中更新获取后端请求的最新参数， 并传给table组件\n_createClass(Account,[{key:'changeFilter',value:function changeFilter(obj){this.setState({username:obj.username,// 账户\nname:obj.name,// 名称\naccountCode:obj.accountCode,// 学号/教工号\nroleId:obj.roleId// 账户角色\n});}},{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"e\" /* Card */],{title:'\\u8D26\\u6237\\u7BA1\\u7406'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2__Filter__[\"a\" /* default */],{changeFilter:this.changeFilter}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__AccountTable__[\"a\" /* default */],{sourceCode:this.state.sourceCode,username:this.state.username,name:this.state.name,accountCode:this.state.accountCode,roleId:this.state.roleId}));}}]);return Account;}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component);/* harmony default export */ __webpack_exports__[\"default\"] = (Account);\n\n/***/ }),\n\n/***/ 2252:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd__ = __webpack_require__(393);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__AddOrEditAccountModel__ = __webpack_require__(1780);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__axios__ = __webpack_require__(1147);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var Option=__WEBPACK_IMPORTED_MODULE_1_antd__[\"y\" /* Select */].Option;var Filter=function(_React$Component){_inherits(Filter,_React$Component);function Filter(props){_classCallCheck(this,Filter);var _this=_possibleConstructorReturn(this,(Filter.__proto__||Object.getPrototypeOf(Filter)).call(this,props));_this.state={account:\"\",// 账户\nname:\"\",// 名称\ncode:\"\",// 学号/教工号\nrole:\"\",// 账户角色\nroleList:[],// 账户角色下拉\n// 显示隐藏创建新用户弹出框\naddModalShow:false};_this.accountChange=_this.accountChange.bind(_this);// 账户名称\n_this.nameChange=_this.nameChange.bind(_this);// 姓名\n_this.codeChange=_this.codeChange.bind(_this);// 学号/教工号\n_this.roleChange=_this.roleChange.bind(_this);// 选择角色\n_this.handleSearch=_this.handleSearch.bind(_this);// 搜索\n_this.showAddModal=_this.showAddModal.bind(_this);// 显示创建新用户弹出框\n_this.hideAddModal=_this.hideAddModal.bind(_this);// 显示创建新用户弹出框\nreturn _this;}// 账户名称\n_createClass(Filter,[{key:'accountChange',value:function accountChange(e){this.setState({account:e.target.value});}// 姓名\n},{key:'nameChange',value:function nameChange(e){this.setState({name:e.target.value});}// 学号/教工号\n},{key:'codeChange',value:function codeChange(e){this.setState({code:e.target.value});}// 选择角色\n},{key:'roleChange',value:function roleChange(value){this.setState({role:value});}// 搜索\n},{key:'handleSearch',value:function handleSearch(){var obj={// 键名按照后端数据键名给\nusername:this.state.account,// 账户\nname:this.state.name,// 名称\naccountCode:this.state.code,// 学号/教工号\nroleId:this.state.role// 账户角色\n};this.props.changeFilter(obj);}// 显示创建用户弹出框\n},{key:'showAddModal',value:function showAddModal(){this.setState({addModalShow:true});}// 隐藏创建用户弹出框\n},{key:'hideAddModal',value:function hideAddModal(){this.setState({addModalShow:false});}},{key:'componentDidMount',value:function componentDidMount(){var _this2=this;Object(__WEBPACK_IMPORTED_MODULE_3__axios__[\"a\" /* getAction */])(// 获取账户角色下拉选项数据\n\"/bigdata/system/role/list?sourceCode=pc\").then(function(res){if(res.success){var newRoleList=[];res.obj.forEach(function(item){if(item.roleName!=='超级管理员'){newRoleList.push({label:item.roleName,value:item.id});}});newRoleList.unshift({// 加入全部选项\nlabel:\"全部\",value:\"\"});_this2.setState({roleList:newRoleList});}});}},{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Fragment,null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',null,'\\u8D26\\u6237'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"m\" /* Input */],{value:this.state.account,onChange:this.accountChange,placeholder:'\\u8BF7\\u8F93\\u5165\\u8D26\\u6237\\u540D\\u79F0',style:{width:130,display:\"inline-block\",marginLeft:10,marginRight:10}}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',null,'\\u59D3\\u540D'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"m\" /* Input */],{value:this.state.name,onChange:this.nameChange,placeholder:'\\u8BF7\\u8F93\\u5165\\u59D3\\u540D',style:{width:130,display:\"inline-block\",marginLeft:10,marginRight:10}}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',null,'\\u5B66\\u53F7/\\u6559\\u5DE5\\u53F7'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"m\" /* Input */],{value:this.state.code,onChange:this.codeChange,placeholder:'\\u8BF7\\u8F93\\u5165\\u5B66\\u53F7/\\u6559\\u5DE5\\u53F7',style:{width:150,display:\"inline-block\",marginLeft:10,marginRight:10}}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',{style:{marginRight:10}},'\\u8D26\\u6237\\u89D2\\u8272'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"y\" /* Select */],{placeholder:'\\u8BF7\\u9009\\u62E9\\u8D26\\u6237\\u89D2\\u8272',style:{width:150},onChange:this.roleChange},this.state.roleList.length>0?this.state.roleList.map(function(item){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(Option,{value:item.value,key:item.value},item.label);}):null),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"d\" /* Button */],{type:'primary',onClick:this.handleSearch,style:{margin:\"0px 10px\"}},'\\u641C\\u7D22'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"d\" /* Button */],{type:'primary',icon:'plus',onClick:this.showAddModal},'\\u521B\\u5EFA\\u65B0\\u7528\\u6237'),this.state.addModalShow?__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2__AddOrEditAccountModel__[\"a\" /* default */],{title:'新增用户',onOk:this.handleSearch,hideModal:this.hideAddModal}):null);}}]);return Filter;}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component);/* harmony default export */ __webpack_exports__[\"a\"] = (Filter);\n\n/***/ }),\n\n/***/ 2253:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd__ = __webpack_require__(393);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__AddOrEditAccountModel__ = __webpack_require__(1780);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__axios__ = __webpack_require__(1147);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var AccountTable=function(_React$Component){_inherits(AccountTable,_React$Component);function AccountTable(props){_classCallCheck(this,AccountTable);var _this=_possibleConstructorReturn(this,(AccountTable.__proto__||Object.getPrototypeOf(AccountTable)).call(this,props));_this.state={// table表头设置\ncolumns:[{title:'序号',dataIndex:'sortIndex',width:\"6%\"},{title:'账户名',dataIndex:'username',width:\"10%\",render:function render(text){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',{title:text},text);}},{title:'姓名',dataIndex:'name'},{title:'性别',dataIndex:'sex',render:function render(text){if(text===1){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',null,'\\u7537');}else if(text===2){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',null,'\\u5973');}else{return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',null,'-');}}},{title:'学工/教工号',dataIndex:'accountCode'},{title:'角色',dataIndex:'roles'},{title:'操作',dataIndex:'menus',width:\"25%\",render:function render(text,record){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',{style:{color:\"#1890ff\"}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',{onClick:function onClick(){_this.showEdit(record);},style:{marginRight:10,cursor:\"pointer\"}},'\\u7F16\\u8F91'),'|',__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',{onClick:function onClick(){_this.initcode(record);},style:{marginRight:10,marginLeft:10,cursor:\"pointer\"}},'\\u521D\\u59CB\\u5316\\u5BC6\\u7801'),'|',__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"t\" /* Popconfirm */],{title:'\\u786E\\u5B9A\\u5220\\u9664\\uFF1F',okText:'\\u662F',cancelText:'\\u5426',onConfirm:function onConfirm(){_this.deleteUser(record);}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',{style:{marginLeft:10,cursor:\"pointer\"}},'\\u5220\\u9664')));}}],// tabel数据源\ndata:[// table数据结构形式\n//              {\n//                 key: '1',\n//                 sortIndex: \"1\",\n//                 username: \"admin\",\n//                 name: '胡彦斌',\n//                 sex: \"1\",\n//                 accountCode: \"111111\",\n//                 roles: \"普通管理员\",\n//                 menus: null\n//              }\n],// 分页设置\npagination:{current:1,pageSize:10,total:null},// 显示隐藏编辑弹出框\neditShow:false,// 传递给子组件（编辑弹出框）的数据（编辑行的所有数据）\nrowInfo:\"\"};_this.handleTableChange=_this.handleTableChange.bind(_this);// 分页操作\n_this.getData=_this.getData.bind(_this);// 请求table数据\n_this.initcode=_this.initcode.bind(_this);// 初始化密码\n_this.deleteUser=_this.deleteUser.bind(_this);// 删除用户\n_this.showEdit=_this.showEdit.bind(_this);// 显示编辑弹出框\n_this.hideEdit=_this.hideEdit.bind(_this);// 隐藏编辑弹出框\n_this.reloadTable=_this.reloadTable.bind(_this);// 重新加载表单， 主要用于子组件中操作完成之后重新载入当前页面的table\nreturn _this;}// 分页操作\n_createClass(AccountTable,[{key:'handleTableChange',value:function handleTableChange(page){var _this2=this;var current=page.current,pageSize=page.pageSize,total=page.total;this.setState(function(){return{pagination:{current:current,pageSize:pageSize,total:total}};},function(){_this2.getData();});}// 重新加载表单， 主要用于子组件中操作完成之后重新载入当前页面的table\n},{key:'reloadTable',value:function reloadTable(){var page={current:this.state.pagination.current,pageSize:this.state.pagination.pageSize,total:this.state.pagination.total};this.handleTableChange(page);}},{key:'getData',value:function getData(){var _this3=this;// 父级组件传递进来的参数\nvar _props=this.props,sourceCode=_props.sourceCode,username=_props.username,name=_props.name,accountCode=_props.accountCode,roleId=_props.roleId;Object(__WEBPACK_IMPORTED_MODULE_3__axios__[\"a\" /* getAction */])(\"/bigdata/system/user/list\",{// 请求参数， 根据后端键值对命名\n\"sourceCode\":sourceCode,\"pageNum\":this.state.pagination.current,\"pageSize\":this.state.pagination.pageSize,\"username\":username,\"name\":name,\"accountCode\":accountCode,\"roleId\":roleId}).then(function(res){if(res.success&&res.obj&&res.obj.rows.length>0){// 后端返回的数据加上key值， antd组件所需，\nvar newData=res.obj.rows.filter(function(item){return item.roles!=='超级管理员';});newData.forEach(function(item,index){item.key=item.id;// 后端数据并不返回排序， 这里循环加上序号\nitem.sortIndex=index-0+1;});// 更新本地数据源， 以及分页设置\n_this3.setState({data:newData,pagination:{current:res.obj.page,pageSize:res.obj.pageSize,total:res.obj.total}});}else{// 如果请求失败， 数据源重置\n_this3.setState({data:[],pagination:{current:1,pageSize:10,total:null}});}});}// 点击编辑，显示编辑弹出框\n},{key:'showEdit',value:function showEdit(record){this.setState({editShow:true,rowInfo:record});}// 隐藏/ 卸载编辑弹出框\n},{key:'hideEdit',value:function hideEdit(){this.setState({editShow:false});}// 初始化密码\n},{key:'initcode',value:function initcode(record){Object(__WEBPACK_IMPORTED_MODULE_3__axios__[\"b\" /* postAction */])(\"/bigdata/system/user/initPwd\",{sourceCode:\"pc\",id:record.id},0,1).then(function(res){if(res.success){__WEBPACK_IMPORTED_MODULE_1_antd__[\"J\" /* message */].success(\"初始化密码成功， 初始密码： !23qaz\");}});}// 删除用户\n},{key:'deleteUser',value:function deleteUser(record){var _this4=this;Object(__WEBPACK_IMPORTED_MODULE_3__axios__[\"b\" /* postAction */])(\"/bigdata/system/user/delete\",{sourceCode:\"pc\",id:record.id},0,1).then(function(res){if(res.success){var page={current:_this4.state.pagination.current,pageSize:_this4.state.pagination.pageSize,total:_this4.state.pagination.total};_this4.handleTableChange(page);}});}// props参数发生时， table重置， 重新加载\n},{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){var _this5=this;if(nextProps!==this.props){this.setState(function(){return{data:[],pagination:{current:1,pageSize:10,total:null}};},function(){_this5.getData();});}}// 性能优化， props改变不继续render， 只有当state发生变化才继续render\n},{key:'shouldComponentUpdate',value:function shouldComponentUpdate(nextProps,nextState){if(nextState!==this.state){return true;}else{return false;}}},{key:'componentDidMount',value:function componentDidMount(){this.getData();// 请求table数据\n}},{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Fragment,null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd__[\"B\" /* Table */],{columns:this.state.columns,dataSource:this.state.data,pagination:this.state.pagination,onChange:this.handleTableChange,bordered:true,style:{marginTop:20}}),this.state.editShow?__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2__AddOrEditAccountModel__[\"a\" /* default */],{title:'编辑用户',rowInfo:this.state.rowInfo,hideModal:this.hideEdit,onOk:this.reloadTable}):null);}}]);return AccountTable;}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component);/* harmony default export */ __webpack_exports__[\"a\"] = (AccountTable);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/28.275fd6f6.chunk.js","/**\r\n * Created by hutao on 2018/8/31.\r\n * 新增或编辑账户管理\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Form, Input, Select, message } from 'antd';\r\nimport { getAction, postAction } from '@/axios';\r\nimport MainModal from '@/common/components/MainModal';\r\n\r\nconst FormItem = Form.Item;\r\nconst Option = Select.Option;\r\n\r\n//表单布局\r\nconst formItemLayout = {\r\n    labelCol: { span: 6 },\r\n    wrapperCol: { span: 17, style: { paddingLeft: '10px' } },\r\n};\r\n\r\nclass AddOrEditAccount extends Component {\r\n    state = {\r\n        roleList: [],\r\n    }\r\n    componentWillMount() {\r\n        // 获取用户角色列表信息\r\n        getAction(\"/bigdata/system/role/list\", { sourceCode: \"pc\" }).then((res) => {\r\n            if (res.success && res.obj.length > 0) {\r\n                let newRoleList = [];\r\n                res.obj.forEach((item) => {\r\n                    if(item.roleName!=='超级管理员'){\r\n                        newRoleList.push({\r\n                            roleName: item.roleName,\r\n                            roleId: item.id + \"\" // 这里需要string类型， 后端传过来的是num类型， 简单转换一下\r\n                        })\r\n                    }\r\n                })\r\n                this.setState({\r\n                    roleList: newRoleList\r\n                })\r\n            }\r\n        });\r\n    }\r\n    sureAction = () => {\r\n        //表单验证\r\n        this.props.form.validateFields(\r\n            (err, values) => {\r\n                if (!err) {\r\n                    let { userName, name, sex, accountCode, roleId } = values;\r\n                    // let roleName = this.state.roleList.filter(item=>item.roleId===roleId)[0].roleName;\r\n                    let reqUrl = \"/bigdata/system/user/save\";\r\n                    let data = {\r\n                        sourceCode: \"pc\", // 调用端：(默认PC)\r\n                        userName, // 账户名 string\r\n                        name, // 姓名 string\r\n                        sex: sex - 0, // 性别 num init ， state中存储的是string类型， 这里简单转换一下\r\n                        accountCode, // 学号/教工号 string\r\n                        roleId:roleId - 0, // 用户角色 num init ， state中存储的是string类型， 这里简单转换一下\r\n                        // roleName\r\n                    }\r\n                    if (this.props.rowInfo) {\r\n                        reqUrl = \"/bigdata/system/user/update\";\r\n                        data.id = this.props.rowInfo.id;\r\n                    }\r\n                    postAction(reqUrl, data,0,1).then((res) => {\r\n                        if (res.success) {\r\n                            message.success(\"保存成功！！！\");\r\n                            this.props.hideModal();\r\n                            this.props.onOk();\r\n                        } else {\r\n                            message.error(res.obj);\r\n                        }\r\n                    })\r\n                }\r\n            },\r\n        );\r\n    }\r\n    render() {\r\n        const { getFieldDecorator } = this.props.form;\r\n        let editData = this.props.rowInfo;\r\n        let roleId;\r\n        if (editData) {\r\n            this.state.roleList.forEach((item, index) => {\r\n                if (item.roleName === editData.roles) {\r\n                    roleId = item.roleId\r\n                }\r\n            });\r\n        }\r\n        return (\r\n            <MainModal\r\n                okText=\"确定\"\r\n                title={this.props.title}\r\n                visible={true}\r\n                onOk={this.sureAction}\r\n                onCancel={this.props.hideModal}\r\n                cancelText=\"取消\"\r\n            >\r\n                <FormItem {...formItemLayout} label=\"账户名称\">\r\n                    {getFieldDecorator('userName', {\r\n                        rules: [{\r\n                            required: true,\r\n                            message: '请输入账户名称'\r\n                        }],\r\n                        initialValue: editData && editData.username\r\n                    })(\r\n                        <Input placeholder=\"请输入账户名称\" />\r\n                    )}\r\n                </FormItem>\r\n                <FormItem {...formItemLayout} label=\"姓名\">\r\n                    {getFieldDecorator('name', {\r\n                        rules: [{\r\n                            required: true,\r\n                            message: '请输入姓名'\r\n                        }],\r\n                        initialValue: editData && editData.name\r\n                    })(\r\n                        <Input placeholder=\"请输入姓名\" />\r\n                    )}\r\n                </FormItem>\r\n                <FormItem {...formItemLayout} label=\"性别\">\r\n                    {getFieldDecorator('sex', {\r\n                        rules: [{\r\n                            required: true,\r\n                            message: '请输入性别'\r\n                        }],\r\n                        initialValue: editData && editData.sex\r\n                    })(\r\n                        <Select placeholder=\"请选择性别\" style={{ width: \"100%\" }}>\r\n                            <Option value={1}>男</Option>\r\n                            <Option value={2}>女</Option>\r\n                        </Select>\r\n                    )}\r\n                </FormItem>\r\n                <FormItem {...formItemLayout} label=\"学号/教工号\">\r\n                    {getFieldDecorator('accountCode', {\r\n                        rules: [{\r\n                            required: true,\r\n                            message: '请输入学号/教工号'\r\n                        }],\r\n                        initialValue: editData && editData.accountCode\r\n                    })(\r\n                        <Input placeholder=\"请输入学号/教工号\" />\r\n                    )}\r\n                </FormItem>\r\n                <FormItem {...formItemLayout} label=\"用户角色\">\r\n                    {getFieldDecorator('roleId', {\r\n                        rules: [{\r\n                            required: true,\r\n                            message: '请输入用户角色'\r\n                        }],\r\n                        initialValue: roleId\r\n                    })(\r\n                        <Select placeholder=\"请选择用户角色\" style={{ width: \"100%\", marginBottom: 8 }} onChange={this.roleIdChange}>\r\n                            {this.state.roleList.length > 0 ? this.state.roleList.map((item) => {\r\n                                return (\r\n                                    <Option value={item.roleId} key={item.roleId}>{item.roleName}</Option>\r\n                                )\r\n                            }\r\n                            ) : null\r\n                            }\r\n                        </Select>\r\n                    )}\r\n                </FormItem>\r\n            </MainModal>\r\n        )\r\n    }\r\n}\r\n\r\nconst AddOrEditAccountModel = Form.create()(AddOrEditAccount);\r\nexport default AddOrEditAccountModel;\n\n\n// WEBPACK FOOTER //\n// ./src/pages/AccessManage/Account/AddOrEditAccountModel.js","import React from 'react';\r\nimport { Card } from 'antd';\r\nimport Filter from './Filter'; // 顶部过滤器\r\nimport AccountTable from './AccountTable'; // 本页table组件\r\n\r\nclass Account extends React.Component {\r\n\tconstructor (props) {\r\n\t\tsuper(props);\r\n\t\tthis.state={ // 参数命名根据后端键值对名称而来\r\n\t\t\tsourceCode: \"pc\", // 端\r\n\t\t\tusername: \"\", // 账户\r\n\t\t\tname: \"\", // 名称\r\n\t\t\taccountCode: \"\", // 学号/教工号\r\n\t\t\troleId:\"\" // 账户角色\r\n\t\t};\r\n\t\tthis.changeFilter = this.changeFilter.bind(this); // 从子组件（过滤器Filter）中更新获取后端请求的最新参数， 并传给table组件\r\n\t}\r\n\t\r\n\t// 从子组件（过滤器Filter）中更新获取后端请求的最新参数， 并传给table组件\r\n\tchangeFilter(obj){\r\n\t\tthis.setState({\r\n\t\t\tusername: obj.username, // 账户\r\n\t\t\tname: obj.name, // 名称\r\n\t\t\taccountCode: obj.accountCode, // 学号/教工号\r\n\t\t\troleId:obj.roleId // 账户角色\r\n\t\t})\r\n\t}\r\n\t\r\n\trender () {\r\n\t\treturn (\r\n\t\t\t<Card title='账户管理'>\r\n\t\t\t\t<Filter changeFilter={this.changeFilter} />\r\n\t\t\t\t<AccountTable\r\n\t\t\t\t\tsourceCode={this.state.sourceCode}\r\n\t\t\t\t\tusername={this.state.username}\r\n\t\t\t\t\tname={this.state.name}\r\n\t\t\t\t\taccountCode={this.state.accountCode}\r\n\t\t\t\t\troleId={this.state.roleId}\r\n\t\t\t\t/>\r\n\t\t\t</Card>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Account;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/AccessManage/Account/index.js","import React from 'react';\r\nimport { Input, Select, Button } from 'antd';\r\nimport AddOrEditAccountModel from './AddOrEditAccountModel';\r\nimport { getAction} from '@/axios';\r\nconst Option = Select.Option;\r\n\r\nclass Filter extends React.Component{\r\n\t\r\n\tconstructor (props) {\r\n\t\tsuper(props);\r\n\t\tthis.state={\r\n\t\t\taccount: \"\", // 账户\r\n\t\t\tname: \"\", // 名称\r\n\t\t\tcode: \"\", // 学号/教工号\r\n\t\t\trole:\"\", // 账户角色\r\n\t\t\troleList: [], // 账户角色下拉\r\n            // 显示隐藏创建新用户弹出框\r\n            addModalShow: false, \r\n\t\t};\r\n\t\tthis.accountChange = this.accountChange.bind(this); // 账户名称\r\n\t\tthis.nameChange = this.nameChange.bind(this); // 姓名\r\n\t\tthis.codeChange = this.codeChange.bind(this); // 学号/教工号\r\n\t\tthis.roleChange = this.roleChange.bind(this); // 选择角色\r\n\t\tthis.handleSearch = this.handleSearch.bind(this); // 搜索\r\n\t\tthis.showAddModal = this.showAddModal.bind(this); // 显示创建新用户弹出框\r\n\t\tthis.hideAddModal = this.hideAddModal.bind(this); // 显示创建新用户弹出框\r\n\t}\r\n\t\r\n\t // 账户名称\r\n\taccountChange (e) {\r\n\t\tthis.setState({\r\n\t\t\taccount:e.target.value\r\n\t\t})\r\n\t}\r\n\t\r\n\t // 姓名\r\n\tnameChange (e) {\r\n\t\tthis.setState({\r\n\t\t\tname:e.target.value\r\n\t\t})\r\n\t}\r\n\t\r\n\t // 学号/教工号\r\n\tcodeChange (e) {\r\n\t\tthis.setState({\r\n\t\t\tcode:e.target.value\r\n\t\t})\r\n\t}\r\n\t\r\n\t// 选择角色\r\n\troleChange(value){\r\n\t\tthis.setState({\r\n\t\t\trole: value\r\n\t\t})\r\n\t}\r\n\t\r\n\t// 搜索\r\n\thandleSearch(){\r\n\t\tconst obj = { // 键名按照后端数据键名给\r\n\t\t\tusername: this.state.account, // 账户\r\n\t\t\tname: this.state.name, // 名称\r\n\t\t\taccountCode: this.state.code, // 学号/教工号\r\n\t\t\troleId: this.state.role // 账户角色\r\n\t\t};\r\n\t\tthis.props.changeFilter(obj);\r\n\t}\r\n\t\r\n\t// 显示创建用户弹出框\r\n\tshowAddModal(){\r\n\t\tthis.setState({\r\n\t\t\taddModalShow: true,\r\n\t\t})\r\n\t}\r\n\t\r\n\t// 隐藏创建用户弹出框\r\n\thideAddModal(){\r\n\t\tthis.setState({\r\n\t\t\taddModalShow: false\r\n\t\t})\r\n\t}\r\n\t\r\n\tcomponentDidMount(){\r\n\t\tgetAction( // 获取账户角色下拉选项数据\r\n\t\t\t\"/bigdata/system/role/list?sourceCode=pc\"\r\n\t\t).then(\r\n\t\t\t(res)=>{\r\n\t\t\t\tif (res.success) {\r\n\t\t\t\t\tlet newRoleList=[];\r\n\t\t\t\t\tres.obj.forEach(\r\n\t\t\t\t\t\t(item) => {\r\n\t\t\t\t\t\t\tif(item.roleName!=='超级管理员'){\r\n\t\t\t\t\t\t\t\tnewRoleList.push({\r\n\t\t\t\t\t\t\t\t\tlabel: item.roleName,\r\n\t\t\t\t\t\t\t\t\tvalue: item.id\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t\tnewRoleList.unshift({ // 加入全部选项\r\n\t\t\t\t\t\tlabel: \"全部\",\r\n\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\troleList: newRoleList\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\t\r\n\trender () {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<span>账户</span>\r\n\t\t\t\t\r\n\t\t\t\t<Input \r\n\t\t\t\t\tvalue={this.state.account} \r\n\t\t\t\t\tonChange={this.accountChange} \r\n\t\t\t\t\tplaceholder=\"请输入账户名称\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: 130, \r\n\t\t\t\t\t\tdisplay: \"inline-block\",\r\n\t\t\t\t\t\tmarginLeft: 10, \r\n\t\t\t\t\t\tmarginRight: 10\r\n\t\t\t\t\t}} \r\n\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<span>姓名</span>\r\n\t\t\t\t<Input \r\n\t\t\t\t\tvalue={this.state.name} \r\n\t\t\t\t\tonChange={this.nameChange} \r\n\t\t\t\t\tplaceholder=\"请输入姓名\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: 130, \r\n\t\t\t\t\t\tdisplay: \"inline-block\",\r\n\t\t\t\t\t\tmarginLeft: 10, \r\n\t\t\t\t\t\tmarginRight: 10\r\n\t\t\t\t\t}} \r\n\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<span>学号/教工号</span>\r\n\t\t\t\t<Input \r\n\t\t\t\t\tvalue={this.state.code} \r\n\t\t\t\t\tonChange={this.codeChange} \r\n\t\t\t\t\tplaceholder=\"请输入学号/教工号\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: 150, \r\n\t\t\t\t\t\tdisplay: \"inline-block\",\r\n\t\t\t\t\t\tmarginLeft: 10, \r\n\t\t\t\t\t\tmarginRight: 10\r\n\t\t\t\t\t}} \r\n\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<span style={{marginRight: 10}}>账户角色</span>\r\n\t\t\t\t<Select placeholder='请选择账户角色' style={{ width: 150 }} onChange={this.roleChange}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.state.roleList.length >0\r\n\t\t\t\t\t\t?\r\n\t\t\t\t\t\tthis.state.roleList.map(\r\n\t\t\t\t\t\t\t(item)=>{\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Option value={item.value} key={item.value}>{item.label}</Option>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t\t}\r\n\t\t\t    </Select>\r\n\t\t\t\t\r\n\t\t\t\t<Button type=\"primary\" onClick={this.handleSearch} style={{margin: \"0px 10px\"}}>搜索</Button>\r\n\t\t\t\t\r\n\t\t\t\t<Button type=\"primary\" icon=\"plus\" onClick={this.showAddModal}>创建新用户</Button>\r\n\t\t\t\t\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.addModalShow\r\n\t\t\t\t\t?\r\n\t\t\t\t\t<AddOrEditAccountModel \r\n\t\t\t\t\t\ttitle={'新增用户'}\r\n\t\t\t\t\t\tonOk = {this.handleSearch}\r\n\t\t\t\t\t\thideModal = {this.hideAddModal}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t:\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Filter;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/AccessManage/Account/Filter.js","import React from 'react';\r\nimport { Table, message, Popconfirm } from 'antd';\r\nimport AddOrEditAccountModel from './AddOrEditAccountModel';\r\nimport { getAction,postAction} from '@/axios';\r\n\r\nclass AccountTable extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\t// table表头设置\r\n\t\t\tcolumns: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: '序号',\r\n\t\t\t\t\tdataIndex: 'sortIndex',\r\n\t\t\t\t\twidth: \"6%\"\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: '账户名',\r\n\t\t\t\t\tdataIndex: 'username',\r\n\t\t\t\t\twidth: \"10%\",\r\n\t\t\t\t\trender: (text) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<span title={text}>{text}</span>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: '姓名',\r\n\t\t\t\t\tdataIndex: 'name'\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: '性别',\r\n\t\t\t\t\tdataIndex: 'sex',\r\n\t\t\t\t\trender: (text) => {\r\n\t\t\t\t\t\tif (text === 1) {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<span>男</span>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t} else if (text === 2) {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<span>女</span>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<span>-</span>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: '学工/教工号',\r\n\t\t\t\t\tdataIndex: 'accountCode'\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: '角色',\r\n\t\t\t\t\tdataIndex: 'roles'\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: '操作',\r\n\t\t\t\t\tdataIndex: 'menus',\r\n\t\t\t\t\twidth: \"25%\",\r\n\t\t\t\t\trender: (text, record) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<span style={{ color: \"#1890ff\" }}>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tonClick={() => { this.showEdit(record) }}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tmarginRight: 10,\r\n\t\t\t\t\t\t\t\t\t\tcursor: \"pointer\"\r\n\t\t\t\t\t\t\t\t\t}}>编辑\r\n\t                \t\t\t</span>|\r\n\r\n\t                \t\t\t<span\r\n\t\t\t\t\t\t\t\t\tonClick={() => { this.initcode(record) }}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tmarginRight: 10,\r\n\t\t\t\t\t\t\t\t\t\tmarginLeft: 10,\r\n\t\t\t\t\t\t\t\t\t\tcursor: \"pointer\"\r\n\t\t\t\t\t\t\t\t\t}}>初始化密码\r\n\t                \t\t\t</span>|\r\n\r\n\t\t\t\t\t\t\t\t<Popconfirm title=\"确定删除？\" okText=\"是\" cancelText=\"否\" onConfirm={() => { this.deleteUser(record) }}>\r\n\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tmarginLeft: 10,\r\n\t\t\t\t\t\t\t\t\t\t\tcursor: \"pointer\"\r\n\t\t\t\t\t\t\t\t\t\t}}>删除\r\n\t                \t\t\t</span>\r\n\t\t\t\t\t\t\t\t</Popconfirm>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t// tabel数据源\r\n\t\t\tdata: [ // table数据结构形式\r\n\t\t\t\t//              {\r\n\t\t\t\t//                 key: '1',\r\n\t\t\t\t//                 sortIndex: \"1\",\r\n\t\t\t\t//                 username: \"admin\",\r\n\t\t\t\t//                 name: '胡彦斌',\r\n\t\t\t\t//                 sex: \"1\",\r\n\t\t\t\t//                 accountCode: \"111111\",\r\n\t\t\t\t//                 roles: \"普通管理员\",\r\n\t\t\t\t//                 menus: null\r\n\t\t\t\t//              }\r\n\t\t\t],\r\n\t\t\t// 分页设置\r\n\t\t\tpagination: {\r\n\t\t\t\tcurrent: 1,\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t\ttotal: null\r\n\t\t\t},\r\n\t\t\t// 显示隐藏编辑弹出框\r\n\t\t\teditShow: false,\r\n\t\t\t// 传递给子组件（编辑弹出框）的数据（编辑行的所有数据）\r\n\t\t\trowInfo: \"\"\r\n\t\t};\r\n\t\tthis.handleTableChange = this.handleTableChange.bind(this); // 分页操作\r\n\t\tthis.getData = this.getData.bind(this); // 请求table数据\r\n\t\tthis.initcode = this.initcode.bind(this); // 初始化密码\r\n\t\tthis.deleteUser = this.deleteUser.bind(this); // 删除用户\r\n\t\tthis.showEdit = this.showEdit.bind(this); // 显示编辑弹出框\r\n\t\tthis.hideEdit = this.hideEdit.bind(this); // 隐藏编辑弹出框\r\n\t\tthis.reloadTable = this.reloadTable.bind(this); // 重新加载表单， 主要用于子组件中操作完成之后重新载入当前页面的table\r\n\t}\r\n\r\n\t// 分页操作\r\n\thandleTableChange(page) {\r\n\t\tconst { current, pageSize, total } = page;\r\n\t\tthis.setState(\r\n\t\t\t() => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpagination: {\r\n\t\t\t\t\t\tcurrent,\r\n\t\t\t\t\t\tpageSize,\r\n\t\t\t\t\t\ttotal\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t() => {\r\n\t\t\t\tthis.getData()\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\t// 重新加载表单， 主要用于子组件中操作完成之后重新载入当前页面的table\r\n\treloadTable() {\r\n\t\tlet page = {\r\n\t\t\tcurrent: this.state.pagination.current,\r\n\t\t\tpageSize: this.state.pagination.pageSize,\r\n\t\t\ttotal: this.state.pagination.total\r\n\t\t};\r\n\t\tthis.handleTableChange(page);\r\n\t}\r\n\r\n\r\n\tgetData() {\r\n\t\t// 父级组件传递进来的参数\r\n\t\tconst { sourceCode, username, name, accountCode, roleId } = this.props;\r\n\t\tgetAction(\r\n\t\t\t\"/bigdata/system/user/list\",\r\n\t\t\t{ // 请求参数， 根据后端键值对命名\r\n\t\t\t\t\"sourceCode\": sourceCode,\r\n\t\t\t\t\"pageNum\": this.state.pagination.current,\r\n\t\t\t\t\"pageSize\": this.state.pagination.pageSize,\r\n\t\t\t\t\"username\": username,\r\n\t\t\t\t\"name\": name,\r\n\t\t\t\t\"accountCode\": accountCode,\r\n\t\t\t\t\"roleId\": roleId\r\n\t\t\t}\r\n\t\t).then(\r\n\t\t\t(res) => {\r\n\t\t\t\tif (res.success && res.obj && res.obj.rows.length > 0) {\r\n\t\t\t\t\t// 后端返回的数据加上key值， antd组件所需，\r\n\t\t\t\t\tlet newData = res.obj.rows.filter(item=>item.roles!=='超级管理员');\r\n\t\t\t\t\tnewData.forEach(\r\n\t\t\t\t\t\t(item, index) => {\r\n\t\t\t\t\t\t\titem.key = item.id;\r\n\t\t\t\t\t\t\t// 后端数据并不返回排序， 这里循环加上序号\r\n\t\t\t\t\t\t\titem.sortIndex = (index - 0) + 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t\t// 更新本地数据源， 以及分页设置\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tdata: newData,\r\n\t\t\t\t\t\tpagination: {\r\n\t\t\t\t\t\t\tcurrent: res.obj.page,\r\n\t\t\t\t\t\t\tpageSize: res.obj.pageSize,\r\n\t\t\t\t\t\t\ttotal: res.obj.total\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else { // 如果请求失败， 数据源重置\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tdata: [],\r\n\t\t\t\t\t\tpagination: {\r\n\t\t\t\t\t\t\tcurrent: 1,\r\n\t\t\t\t\t\t\tpageSize: 10,\r\n\t\t\t\t\t\t\ttotal: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\t// 点击编辑，显示编辑弹出框\r\n\tshowEdit(record) {\r\n\t\tthis.setState({\r\n\t\t\teditShow: true,\r\n\t\t\trowInfo: record\r\n\t\t})\r\n\t}\r\n\r\n\t// 隐藏/ 卸载编辑弹出框\r\n\thideEdit() {\r\n\t\tthis.setState({\r\n\t\t\teditShow: false\r\n\t\t})\r\n\t}\r\n\r\n\t// 初始化密码\r\n\tinitcode(record) {\r\n\t\tpostAction(\r\n\t\t\t\"/bigdata/system/user/initPwd\",\r\n\t\t\t{\r\n\t\t\t\tsourceCode: \"pc\",\r\n\t\t\t\tid: record.id\r\n\t\t\t},0,1\r\n\t\t).then(\r\n\t\t\t(res) => {\r\n\t\t\t\tif (res.success) {\r\n\t\t\t\t\tmessage.success(\"初始化密码成功， 初始密码： !23qaz\")\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\t// 删除用户\r\n\tdeleteUser(record) {\r\n\t\tpostAction(\r\n\t\t\t\"/bigdata/system/user/delete\",\r\n\t\t\t{\r\n\t\t\t\tsourceCode: \"pc\",\r\n\t\t\t\tid: record.id\r\n\t\t\t},0,1\r\n\t\t).then(\r\n\t\t\t(res) => {\r\n\t\t\t\tif (res.success) {\r\n\t\t\t\t\tconst page = {\r\n\t\t\t\t\t\tcurrent: this.state.pagination.current,\r\n\t\t\t\t\t\tpageSize: this.state.pagination.pageSize,\r\n\t\t\t\t\t\ttotal: this.state.pagination.total\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.handleTableChange(page)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\t// props参数发生时， table重置， 重新加载\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (nextProps !== this.props) {\r\n\t\t\tthis.setState(\r\n\t\t\t\t() => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tdata: [],\r\n\t\t\t\t\t\tpagination: {\r\n\t\t\t\t\t\t\tcurrent: 1,\r\n\t\t\t\t\t\t\tpageSize: 10,\r\n\t\t\t\t\t\t\ttotal: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t() => {\r\n\t\t\t\t\tthis.getData()\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n\r\n\t// 性能优化， props改变不继续render， 只有当state发生变化才继续render\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\tif (nextState !== this.state) {\r\n\t\t\treturn true\r\n\t\t} else {\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.getData() // 请求table数据\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Table\r\n\t\t\t\t\tcolumns={this.state.columns}\r\n\t\t\t\t\tdataSource={this.state.data}\r\n\t\t\t\t\tpagination={this.state.pagination}\r\n\t\t\t\t\tonChange={this.handleTableChange}\r\n\t\t\t\t\tbordered={true}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tmarginTop: 20\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.editShow\r\n\t\t\t\t\t\t?\r\n\t\t\t\t\t\t<AddOrEditAccountModel\r\n\t\t\t\t\t\t\ttitle={'编辑用户'}\r\n\t\t\t\t\t\t\trowInfo={this.state.rowInfo}\r\n\t\t\t\t\t\t\thideModal={this.hideEdit}\r\n\t\t\t\t\t\t\tonOk={this.reloadTable}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t</React.Fragment>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default AccountTable;\n\n\n// WEBPACK FOOTER //\n// ./src/pages/AccessManage/Account/AccountTable.js"],"sourceRoot":""}